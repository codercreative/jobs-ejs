
<!-- Flash is always an array -->

<% if (success_msg.length > 0) {%>
  <p><%= success_msg[0]%></p>
    <% } %>
  
  <% if (error_msg.length > 0) {%>
    <p><%= error_msg[0]%></p>
  <% } %>

<h2>Jobs List</h2>
<a href="/jobs/new">
  <button type="button">Add new job</button>
</a>
<table id="jobs-table">
  <tr id="jobs-table-header">
    <th>Company</th>
    <th>Position</th>
    <th>Status</th>
    <th colspan="2"></th>
  </tr>
  <% if (jobs && jobs.length) { %>
    <% jobs.forEach((job) => { %>
      <tr>
        <td><%= job.company %></td>
        <td><%= job.position %></td>
        <td><%= job.status %></td>
        <td>
          <a href="/jobs/edit/<%= job.id %>">
          <button type="button">edit</button></a>
        </td>
        <td>
          <form method="POST" action="/jobs/delete/<%= job.id %>" style="display: inline">
          <button>delete</button>
          <input type="hidden" name="_csrf" value="<%= _csrf %>" />
        </form>
      </td>
      </tr>
    <% }) %>
  <% } %>
</table>